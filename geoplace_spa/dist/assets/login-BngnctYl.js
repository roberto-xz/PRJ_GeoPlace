import{_ as g}from"./geoplace_icon-DxfKkP6l.js";import{r as n,b as c,c as _,d as w,e as k,a as t,f as p,g as d,h as m,u as b,o as f}from"./index-Ap3sLeap.js";import{c as y}from"./checkAcess-Badv9-dY.js";import{N as h,A as N}from"./notify_popup-lDmkIe7y.js";import{E as x}from"./email-BurHIsVE.js";import{P as C}from"./passw-BFU2iOiF.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={id:"login-page"},T={__name:"login",setup(A){const u=n(null),r=n(null),a=b(),s=n(!1),o=n({show_loading:!0,goto:void 0,button_text:"Ok, tudo certo",message:"Opa, tudo joia meu parça",icon:"warning.png"});c(()=>{y(a)});const v=async()=>{if(!(!u.value.status||!r.value.status)){s.value=!0,o.value.show_loading=!0;try{const i={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_mail:u.value.addres,user_pass:r.value.passwd})},e=await fetch(N.API_URL+"/login",i);if(e.status==401){setTimeout(()=>{o.value.show_loading=!1},200),o.value.message="Opá, Parece que sua conta ainda não foi ativada, peça um novo link de ativação",o.value.goto="/getNewLink",o.value.button_text="Pedir novo Link";return}if(e.status==200){const l=await e.json();window.localStorage.setItem("gpl_lgToken",l),a.push("/home")}else if(e.status==404||e.status==400){setTimeout(()=>{o.value.show_loading=!1},200),o.value.message="Credenciais inválidas, Verifique se você digitou o email e senha corretos",o.value.goto=void 0,o.value.button_text="Fechar";return}}catch{setTimeout(()=>{o.value.show_loading=!1},200),o.value.message="Ué, Nosso servidor não está respondendo, por favor volte outra hora!!",o.value.goto=void 0,o.value.button_text="fechar"}}};return(i,e)=>(f(),_("div",B,[s.value?(f(),w(h,{key:0,attributes:o.value,onClosePopup:e[0]||(e[0]=()=>{s.value=!s.value})},null,8,["attributes"])):k("",!0),t("main",null,[e[6]||(e[6]=t("img",{src:g,alt:"geoplace image logo"},null,-1)),e[7]||(e[7]=t("header",null,[t("h1",null,"Bem vindo de volta"),t("h5",null,"Digite suas Credenciais para acessar sua conta")],-1)),p(x,{ref_key:"email_ref",ref:u},null,512),p(C,{ref_key:"passw_ref",ref:r},null,512),t("button",{onClick:e[1]||(e[1]=l=>v()),id:"bnt-login"},"Entrar"),t("p",null,[e[4]||(e[4]=d("Esqueceu a senha?, ")),t("i",{onClick:e[2]||(e[2]=()=>{m(a).push("/recoverypwd")})}," Recuperar")]),t("p",null,[e[5]||(e[5]=d("Ainda não tem uma conta, ")),t("i",{onClick:e[3]||(e[3]=()=>{m(a).push("/sigin")})}," Criar um conta")])])]))}},R=P(T,[["__scopeId","data-v-555a7056"]]);export{R as default};
