import{_ as f}from"./geoplace_icon-DxfKkP6l.js";import{r as s,b as p,c as v,d as g,e as c,a as o,f as i,g as _,h,u as b,o as d}from"./index-BrPbIO-S.js";import{N as w,A as k}from"./notify_popup-DbA6jAa4.js";import{E as x}from"./email-By2tpRiR.js";import{P as y}from"./passw-SNOd-xPl.js";import{c as P}from"./checkAcess-C0obvF5F.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={id:"sigin-page"},C={__name:"sigin",setup(B){const u=s(null),n=s(null),l=b(),t=s(!1),e=s({show_loading:!0,goto:void 0,button_text:"Ok, tudo certo",message:"Opa, tudo joia meu parça",icon:"warning.png"});p(()=>{P(l)});const m=async()=>{if(!(!u.value.status||!n.value.status)){t.value=!0,e.value.show_loading=!0;try{const r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_mail:u.value.addres,user_pass:n.value.passwd})},a=await fetch(k.API_URL+"/sigin",r);a.status==400&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Parece que sua senha ou seu email não estão em um formato válido",e.value.goto=void 0,e.value.button_text="fechar"),a.status==409&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Esse endereço de email já foi cadastrado na platforma",e.value.goto=void 0,e.value.button_text="fechar"),a.status==500&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Parece que há um erro no servidor, por favor tente mais tarde",e.value.goto=void 0,e.value.button_text="fechar"),a.status==200&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Parabéns sua conta foi criada, enviamos um link de ativação para seu email",e.value.goto="/created",e.value.button_text="Ok",window.localStorage.setItem("gpl_isPendg","ok"))}catch{setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Ué, Nosso servidor não está respondendo, por favor volte outra hora!!",e.value.goto=void 0,e.value.button_text="fechar"}}};return(r,a)=>(d(),v("div",T,[t.value?(d(),g(w,{key:0,attributes:e.value,onClosePopup:a[0]||(a[0]=()=>{t.value=!t.value})},null,8,["attributes"])):c("",!0),o("main",null,[a[3]||(a[3]=o("img",{src:f,alt:"geoplace image logo"},null,-1)),a[4]||(a[4]=o("header",null,[o("h1",null,"Seja bem-vindo"),o("h5",null,"Crie sua conta e aproveite todas as vantagens da plataforma")],-1)),i(x,{ref_key:"email_ref",ref:u},null,512),i(y,{ref_key:"passw_ref",ref:n},null,512),o("button",{id:"bnt-sigin",onClick:m},"Criar conta"),o("p",null,[a[2]||(a[2]=_("Já tem uma conta, ")),o("i",{onClick:a[1]||(a[1]=()=>{h(l).push("/login")})},"Entrar")])])]))}},q=N(C,[["__scopeId","data-v-d17d0299"]]);export{q as default};
