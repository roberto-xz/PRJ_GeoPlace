import{_ as l}from"./geoplace_icon-DxfKkP6l.js";import{E as d}from"./email-By2tpRiR.js";import{N as m,A as v}from"./notify_popup-DbA6jAa4.js";import{c as f}from"./checkAcess-C0obvF5F.js";import{r as u,b as c,u as p,c as g,d as _,e as b,a,f as w,o as r}from"./index-BrPbIO-S.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={id:"recPwd-page"},y={__name:"recoveryPassword",setup(x){const s=u(null),t=u(!1),e=u({show_loading:!0,goto:void 0,button_text:"Ok, tudo certo",message:"Opa, tudo joia meu parça",icon:"warning.png"});c(()=>{f(p())});const i=async()=>{if(s.value.status){t.value=!0,e.value.show_loading=!0;try{const n={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({user_email:s.value.addres})},o=await fetch(v.API_URL+"/recovery-pwd",n);if(o.status==404||o.status==400){setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Esse email não está registrado em nossa base de dados",e.value.goto=void 0,e.value.button_text="Fechar";return}if(o.status==401){setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Opá, Parece que sua conta ainda não foi ativada, peça um novo link de ativação",e.value.goto="/getNewLink",e.value.button_text="Pedir novo Link";return}if(o.status==429){setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Você não pode mais solicitar códigos de ativação, tente novamente em 30 minutos",e.value.goto=void 0,e.value.button_text="fechar";return}o.status==200&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Tudo certo, enviamos um novo link para o seu endereço de email",e.value.goto=void 0,e.value.button_text="fechar")}catch{setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Ué, Nosso servidor não está respondendo, por favor volte outra hora!!",e.value.goto=void 0,e.value.button_text="fechar"}}};return(n,o)=>(r(),g("div",k,[t.value?(r(),_(m,{key:0,attributes:e.value,onClosePopup:o[0]||(o[0]=()=>{t.value=!t.value})},null,8,["attributes"])):b("",!0),a("main",null,[o[2]||(o[2]=a("img",{src:l,alt:"geoplace image logo"},null,-1)),o[3]||(o[3]=a("h1",null,"Você esqueceu sua senha?",-1)),o[4]||(o[4]=a("p",{id:"desc"}," Informe o endereço de email usado no momento do cadastro, e iremos te enviar um link para recadastro de senha.. ",-1)),w(d,{ref_key:"email_ref",ref:s},null,512),a("button",{onClick:o[1]||(o[1]=N=>i())},"Recuperar")])]))}},E=h(y,[["__scopeId","data-v-04018dba"]]);export{E as default};
