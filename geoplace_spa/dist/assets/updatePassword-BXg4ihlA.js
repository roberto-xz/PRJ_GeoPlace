import{_ as v}from"./geoplace_icon-DxfKkP6l.js";import{P as f}from"./passw-SNOd-xPl.js";import{A as i,N as m}from"./notify_popup-DbA6jAa4.js";import{c as _}from"./checkAcess-C0obvF5F.js";import{r,j as g,b as h,c as w,d as b,e as y,a as t,f as P,u as k,o as d}from"./index-BrPbIO-S.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={id:"updPwd-page"},T={__name:"updatePassword",setup(A){const n=r(null),s=r(!1),u=g().params.scode,l=k(),e=r({show_loading:!0,goto:void 0,button_text:"Ok, tudo certo",message:"Opa, tudo joia meu parça",icon:"warning.png"});h(async()=>{_(l),s.value=!0,e.value.show_loading=!0;try{const a={method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({gp_code:u,unpassw:"tem_jeito_nao_oda_he_genio"})};if((await fetch(i.API_URL+"/update-pwd",a)).status==401)return l.push("/error/403");s.value=!1,e.show_loading=!1}catch{}});const p=async()=>{if(!n.value.status)return;s.value=!0,e.value.show_loading=!0;let a=200;console.log(u);try{const o={method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify({gp_code:u,unpassw:n.value.passwd})};a=(await fetch(i.API_URL+"/update-pwd",o)).status}catch{setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Ué, Nosso servidor não está respondendo, por favor volte outra hora!!",e.value.goto=void 0,e.value.button_text="fechar";return}a==200&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.icon="sucsess.png",e.value.message="Sua senha foi atualizada com sucesso!, Agora você pode fazer login com sua nova senha.",e.value.goto="/login",e.value.button_text="entrar"),a==400&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Sua senha não está em um formato válido, tente outra senha",e.value.goto=void 0,e.value.button_text="fechar"),a==401&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Esse link não é valido, Por favor peça um novo link para redefinir sua senha",e.value.goto="/recoverypwd",e.value.button_text="Pedir novo link"),a==408&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Link expirado, Por favor peça um novo link para redefinir sua senha",e.value.goto="/recoverypwd",e.value.button_text="Pedir novo link"),a==412&&(setTimeout(()=>{e.value.show_loading=!1},200),e.value.message="Por algum motivo desconhecido, sua senha não foi atualizada, tente novamente",e.value.goto=void 0,e.value.button_text="fechar")};return(a,o)=>(d(),w("div",N,[s.value?(d(),b(m,{key:0,attributes:e.value,onClosePopup:o[0]||(o[0]=()=>{s.value=!s.value})},null,8,["attributes"])):y("",!0),t("main",null,[o[2]||(o[2]=t("img",{src:v,alt:"geoplace image logo"},null,-1)),o[3]||(o[3]=t("header",null,[t("h1",null,"Crie sua nova senha"),t("h5",null," Escolha uma nova senha para sua conta. Certifique-se de que ela tenha pelo menos 8 caracteres, incluindo números, letras e simbolos. ")],-1)),P(f,{ref_key:"passw_ref",ref:n},null,512),t("button",{onClick:o[1]||(o[1]=c=>p())},"Atualizar")])]))}},R=x(T,[["__scopeId","data-v-9ffc840e"]]);export{R as default};
